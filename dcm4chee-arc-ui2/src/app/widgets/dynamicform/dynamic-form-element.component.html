<div class="dynamicform" [formGroup]="form">
    <div *ngIf="formelement.show || partSearch != ''">
        <label [attr.for]="formelement.key">{{formelement.label}}</label><br>
    </div>
    <!--form:{{form.controls.arraytest.controls | json}}-->
    <div [ngSwitch]="formelement.controlType">
        <!--<br> in ngswitch {{formelement |json}}<br>-->
        <div class="content">
            <div *ngIf="formelement.show || partSearch != ''">
                <input *ngSwitchCase="'text'" [formControlName]="formelement.key" [id]="formelement.key" [type]="formelement.type" />
            </div>
            <div *ngIf="formelement.show || partSearch != ''">
                <input *ngSwitchCase="'number'" [formControlName]="formelement.key" [id]="formelement.key" type="number" />
            </div>
            <div *ngIf="formelement.show || partSearch != ''">
                <select *ngSwitchCase="'dropdown'" [id]="formelement.key" [formControlName]="formelement.key">
                    <option value="">-</option>
                    <option *ngFor="let opt of formelement.options" [value]="opt.key">{{opt.value}}</option>
                </select>
            </div>
            <div *ngIf="formelement.show || partSearch != ''">
                <div *ngSwitchCase="'radio'">
                    <div *ngFor="let opt of formelement.options">
                        <input  [id]="formelement.key" [formControlName]="formelement.key" [value]="opt.value" type="radio" [checked]="opt.active">{{opt.key}}<br>
                    </div>
                </div>
            </div>
            <div *ngIf="formelement.show || partSearch != ''">
                <div *ngSwitchCase="'checkbox'" [formArrayName]="formelement.key">
                    <div *ngFor="let opt of formelement.options;let checkindex=index" >
                        <input  [id]="formelement.key" [name]="opt.value" [value]="opt.value" (change)="checkboxChange($event, formelement)" [checked]="opt.active" type="checkbox">{{opt.key}}<br>
                    </div>
                </div>
            </div>
            <div *ngIf="formelement.show || partSearch != ''">
                <div *ngSwitchCase="'arrayobject'"  [formArrayName]="formelement.key">
                    <div *ngFor="let item of formelement.options; let i=index" name="" [formGroupName]="i" >
                        <div *ngFor="let element of item.element">
                            <df-element [formelement]="element" [form]="form.controls[formelement.key].controls[i]" [formelements]="formelements"></df-element>
                        </div>
                    </div>
                    <div (click)="addElement(formelement.options, formelement, form.controls[formelement.key].controls)">add</div>
                </div>
            </div>
            <div *ngIf="formelement.show || partSearch != ''">
                <div *ngSwitchCase="'arrayelement'"  [formArrayName]="formelement.key">
                    <div *ngFor="let item of formelement.value; let i=index">
                        <input *ngIf="formelement.type == 'number'" formControlName="{{i}}" type="number">
                        <input *ngIf="formelement.type != 'number'" formControlName="{{i}}" [type]="formelement.type">
                        <span (click)="removeArrayElement(formelement, i, form)">x</span>
                    </div>
                    <div (click)="addArrayElement(formelement.value, form.controls[formelement.key].controls, form)">add</div>
                </div>
            </div>
            <div *ngIf="formelement.show || partSearch != ''">
                <div *ngSwitchCase="'button'">
                    <div *ngIf="formelement.value > 0">
                        <a [ngClass]="{'disabled':!form.valid}" class="btn btn-default" [routerLink]="[formelement.url]" title="{{formelement.description}}">{{formelement.title}}</a>
                        <a [ngClass]="{'disabled':!form.valid}" class="btn btn-danger" (click)="$event.preventDefault();removeObject(formelement,form.controls[formelement.key])" title="Remove {{formelement.title}} extension to device">Remove</a>
                    </div>
                    <div *ngIf="formelement.value === 0">
                        <a [ngClass]="{'disabled':!form.valid}" class="btn btn-default disabled" (click)="$event.preventDefault();" title="{{formelement.description}}">{{formelement.title}}</a>
                        <a [ngClass]="{'disabled':!form.valid}" class="btn btn-default" [routerLink]="[formelement.url]" title="{{formelement.description}}" title="Append {{formelement.title}} extension to device">Add</a>
                    </div>
                </div>
            </div>
            <div *ngIf="formelement.show || partSearch != ''">
                <div *ngSwitchCase="'buttondropdown'">
                    <label title="{{formelement.description}}">{{formelement.title}}</label>
                    <select [attr.disabled]="form.valid ? null:true" (change)="navigateTo($event.target.value)" *ngIf="formelement.options && formelement.options.length > 0">
                        <option [value]="">-</option>
                        <option *ngFor="let opt of formelement.options" [value]="opt.url">{{opt.title}}</option>
                    </select>
                    <a [ngClass]="{'disabled':!form.valid}" class="btn btn-default" [routerLink]="[formelement.addUrl]" title="{{formelement.description}}">Add</a>
                    <a [ngClass]="{'disabled':!form.valid}" class="btn btn-default" *ngIf="formelement.options && formelement.options.length > 0" (click)="$event.preventDefault();clone(formelement,form.controls[formelement.key].controls)" title="{{formelement.description}}">clone</a>
                </div>
            </div>
            <!--<pre *ngIf="form.controls[formelement.key] && form.controls[formelement.key].errors">formcontrols{{form.controls[formelement.key].errors |json }}</pre>-->
            <div *ngIf="(formelement.show || partSearch != '') && form.controls[formelement.key] && form.controls[formelement.key].errors">
                <span class="text-danger" *ngIf="form.controls[formelement.key].errors && form.controls[formelement.key].errors.required">
                    This field is required!
                </span>
                <span class="text-danger" *ngIf="form.controls[formelement.key].errors && form.controls[formelement.key].errors.msg">
                    {{form.controls[formelement.key].errors.msg}}
                </span>
            </div>
        </div>
        <div *ngIf="formelement.show || partSearch != ''">
            <span class="description">{{formelement.description}}</span>
        </div>
        <div class="toggle" *ngSwitchCase="'togglebutton'">
            <h4 (click)="toggleTab(formelement.order)">{{formelement.title}}</h4>
        </div>
<!--        <div *ngIf="form.controls[formelement.key]invalid" class="ng-invalid">Invalid {{fformelement.title}}</div>
        <div class="form-control-feedback"
             *ngIf="form.controls[formelement.key]errors && (form.controls[formelement.key]dirty || form.controls[formelement.key]touched)">
            <pre>errors:{{form.controls[formelement.key]errors}}</pre>
            &lt;!&ndash;<p *ngIf="password.errors.required">Password is required</p>&ndash;&gt;
            &lt;!&ndash;<p *ngIf="password.errors.minlength">Password must be 8 characters long, we need another {{password.errors.minlength.requiredLength - password.errors.minlength.actualLength}} characters </p>&ndash;&gt;
        </div>-->
    </div>
    <!--<div class="errorMessage" *ngIf="formelement.controlType != 'array' && !isValid">{{formelement.label}} is required</div>-->
</div>
